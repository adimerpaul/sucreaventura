import{x as f,v as R,r as w,V as W,b5 as I,l as x,j as d,a$ as te,y as G,b6 as ie,p as N,b7 as k,g as P,m as D,I as J,q as V,aa as F,z as ne,A as j,B as X,b8 as Y,b9 as oe,a8 as le,a9 as re,ba as ae,bb as se,aR as B,bc as E,bd as ue,ad as ce}from"./index-Brl0qRmY.js";const de={ratio:[String,Number]};function fe(e,m){return f(()=>{const i=Number(e.ratio||(m!==void 0?m.value:void 0));return isNaN(i)!==!0&&i>0?{paddingBottom:`${100/i}%`}:null})}const ge=1.7778,be=R({name:"QImg",props:{...de,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ge},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:m,emit:i}){const t=w(e.initialRatio),s=fe(e,t),a=P(),{registerTimeout:g,removeTimeout:y}=W(),{registerTimeout:r,removeTimeout:l}=W(),b=f(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),v=f(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),h=[w(null),w(b.value)],u=w(0),T=w(!1),q=w(!1),O=f(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),_=f(()=>({width:e.width,height:e.height})),C=f(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),p=f(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function o(){if(l(),e.loadingShowDelay===0){T.value=!0;return}r(()=>{T.value=!0},e.loadingShowDelay)}function c(){l(),T.value=!1}function z({target:n}){k(a)===!1&&(y(),t.value=n.naturalHeight===0?.5:n.naturalWidth/n.naturalHeight,S(n,1))}function S(n,L){L===1e3||k(a)===!0||(n.complete===!0?$(n):g(()=>{S(n,L+1)},50))}function $(n){k(a)!==!0&&(u.value=u.value^1,h[u.value].value=null,c(),n.getAttribute("__qerror")!=="true"&&(q.value=!1),i("load",n.currentSrc||n.src))}function H(n){y(),c(),q.value=!0,h[u.value].value=v.value,h[u.value^1].value=b.value,i("error",n)}function M(n){const L=h[n].value,Q={key:"img_"+n,class:C.value,style:p.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...L};return u.value===n?Object.assign(Q,{class:Q.class+"current",onLoad:z,onError:H}):Q.class+="loaded",d("div",{class:"q-img__container absolute-full",key:"img"+n},d("img",Q))}function ee(){return T.value===!1?d("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},G(m[q.value===!0?"error":"default"])):d("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},m.loading!==void 0?m.loading():e.noSpinner===!0?void 0:[d(ie,{color:e.spinnerColor,size:e.spinnerSize})])}{let n=function(){N(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,L=>{y(),q.value=!1,L===null?(c(),h[u.value^1].value=b.value):o(),h[u.value].value=L},{immediate:!0})};I.value===!0?x(n):n()}return()=>{const n=[];return s.value!==null&&n.push(d("div",{key:"filler",style:s.value})),h[0].value!==null&&n.push(M(0)),h[1].value!==null&&n.push(M(1)),n.push(d(te,{name:"q-transition--fade"},ee)),d("div",{key:"main",class:O.value,style:_.value,role:"img","aria-label":e.alt},n)}}});function ve(){const e=w(!I.value);return e.value===!1&&x(()=>{e.value=!0}),{isHydrated:e}}const Z=typeof ResizeObserver<"u",A=Z===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},K=R({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:m}){let i=null,t,s={width:-1,height:-1};function a(r){r===!0||e.debounce===0||e.debounce==="0"?g():i===null&&(i=setTimeout(g,e.debounce))}function g(){if(i!==null&&(clearTimeout(i),i=null),t){const{offsetWidth:r,offsetHeight:l}=t;(r!==s.width||l!==s.height)&&(s={width:r,height:l},m("resize",s))}}const{proxy:y}=P();if(y.trigger=a,Z===!0){let r;const l=b=>{t=y.$el.parentNode,t?(r=new ResizeObserver(a),r.observe(t),g()):b!==!0&&V(()=>{l(!0)})};return x(()=>{l()}),D(()=>{i!==null&&clearTimeout(i),r!==void 0&&(r.disconnect!==void 0?r.disconnect():t&&r.unobserve(t))}),J}else{let r=function(){i!==null&&(clearTimeout(i),i=null),v!==void 0&&(v.removeEventListener!==void 0&&v.removeEventListener("resize",a,F.passive),v=void 0)},l=function(){r(),t&&t.contentDocument&&(v=t.contentDocument.defaultView,v.addEventListener("resize",a,F.passive),g())};const{isHydrated:b}=ve();let v;return x(()=>{V(()=>{t=y.$el,t&&l()})}),D(r),()=>{if(b.value===!0)return d("object",{class:"q--avoid-card-border",style:A.style,tabindex:-1,type:"text/html",data:A.url,"aria-hidden":"true",onLoad:l})}}}}),Se=R({name:"QPageContainer",setup(e,{slots:m}){const{proxy:{$q:i}}=P(),t=ne(X,j);if(t===j)return console.error("QPageContainer needs to be child of QLayout"),j;Y(oe,!0);const s=f(()=>{const a={};return t.header.space===!0&&(a.paddingTop=`${t.header.size}px`),t.right.space===!0&&(a[`padding${i.lang.rtl===!0?"Left":"Right"}`]=`${t.right.size}px`),t.footer.space===!0&&(a.paddingBottom=`${t.footer.size}px`),t.left.space===!0&&(a[`padding${i.lang.rtl===!0?"Right":"Left"}`]=`${t.left.size}px`),a});return()=>d("div",{class:"q-page-container",style:s.value},G(m.default))}}),{passive:U}=F,he=["both","horizontal","vertical"],me=R({name:"QScrollObserver",props:{axis:{type:String,validator:e=>he.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:le},emits:["scroll"],setup(e,{emit:m}){const i={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let t=null,s,a;N(()=>e.scrollTarget,()=>{r(),y()});function g(){t!==null&&t();const v=Math.max(0,ae(s)),h=se(s),u={top:v-i.position.top,left:h-i.position.left};if(e.axis==="vertical"&&u.top===0||e.axis==="horizontal"&&u.left===0)return;const T=Math.abs(u.top)>=Math.abs(u.left)?u.top<0?"up":"down":u.left<0?"left":"right";i.position={top:v,left:h},i.directionChanged=i.direction!==T,i.delta=u,i.directionChanged===!0&&(i.direction=T,i.inflectionPoint=i.position),m("scroll",{...i})}function y(){s=re(a,e.scrollTarget),s.addEventListener("scroll",l,U),l(!0)}function r(){s!==void 0&&(s.removeEventListener("scroll",l,U),s=void 0)}function l(v){if(v===!0||e.debounce===0||e.debounce==="0")g();else if(t===null){const[h,u]=e.debounce?[setTimeout(g,e.debounce),clearTimeout]:[requestAnimationFrame(g),cancelAnimationFrame];t=()=>{u(h),t=null}}}const{proxy:b}=P();return N(()=>b.$q.lang.rtl,g),x(()=>{a=b.$el.parentNode,y()}),D(()=>{t!==null&&t(),r()}),Object.assign(b,{trigger:l,getPosition:()=>i}),J}}),we=R({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:m,emit:i}){const{proxy:{$q:t}}=P(),s=w(null),a=w(t.screen.height),g=w(e.container===!0?0:t.screen.width),y=w({position:0,direction:"down",inflectionPoint:0}),r=w(0),l=w(I.value===!0?0:B()),b=f(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),v=f(()=>e.container===!1?{minHeight:t.screen.height+"px"}:null),h=f(()=>l.value!==0?{[t.lang.rtl===!0?"left":"right"]:`${l.value}px`}:null),u=f(()=>l.value!==0?{[t.lang.rtl===!0?"right":"left"]:0,[t.lang.rtl===!0?"left":"right"]:`-${l.value}px`,width:`calc(100% + ${l.value}px)`}:null);function T(o){if(e.container===!0||document.qScrollPrevented!==!0){const c={position:o.position.top,direction:o.direction,directionChanged:o.directionChanged,inflectionPoint:o.inflectionPoint.top,delta:o.delta.top};y.value=c,e.onScroll!==void 0&&i("scroll",c)}}function q(o){const{height:c,width:z}=o;let S=!1;a.value!==c&&(S=!0,a.value=c,e.onScrollHeight!==void 0&&i("scrollHeight",c),_()),g.value!==z&&(S=!0,g.value=z),S===!0&&e.onResize!==void 0&&i("resize",o)}function O({height:o}){r.value!==o&&(r.value=o,_())}function _(){if(e.container===!0){const o=a.value>r.value?B():0;l.value!==o&&(l.value=o)}}let C=null;const p={instances:{},view:f(()=>e.view),isContainer:f(()=>e.container),rootRef:s,height:a,containerHeight:r,scrollbarWidth:l,totalWidth:f(()=>g.value+l.value),rows:f(()=>{const o=e.view.toLowerCase().split(" ");return{top:o[0].split(""),middle:o[1].split(""),bottom:o[2].split("")}}),header:E({size:0,offset:0,space:!1}),right:E({size:300,offset:0,space:!1}),footer:E({size:0,offset:0,space:!1}),left:E({size:300,offset:0,space:!1}),scroll:y,animate(){C!==null?clearTimeout(C):document.body.classList.add("q-body--layout-animate"),C=setTimeout(()=>{C=null,document.body.classList.remove("q-body--layout-animate")},155)},update(o,c,z){p[o][c]=z}};if(Y(X,p),B()>0){let o=function(){S=null,$.classList.remove("hide-scrollbar")},c=function(){if(S===null){if($.scrollHeight>t.screen.height)return;$.classList.add("hide-scrollbar")}else clearTimeout(S);S=setTimeout(o,300)},z=function(H){S!==null&&H==="remove"&&(clearTimeout(S),o()),window[`${H}EventListener`]("resize",c)},S=null;const $=document.body;N(()=>e.container!==!0?"add":"remove",z),e.container!==!0&&z("add"),ue(()=>{z("remove")})}return()=>{const o=ce(m.default,[d(me,{onScroll:T}),d(K,{onResize:q})]),c=d("div",{class:b.value,style:v.value,ref:e.container===!0?void 0:s,tabindex:-1},o);return e.container===!0?d("div",{class:"q-layout-container overflow-hidden",ref:s},[d(K,{onResize:O}),d("div",{class:"absolute-full",style:h.value},[d("div",{class:"scroll",style:u.value},[c])])]):c}}});export{K as Q,be as a,Se as b,we as c};
